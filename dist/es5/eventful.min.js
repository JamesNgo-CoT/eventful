"use strict";function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Eventful=function(){var e=0,l={_id:{writable:!0},_events:{writable:!0},_listeningTo:{writable:!0},initialize:{enumerable:!0,value:function(){return this._id="eventful".concat(e++),this._events={},this._listeningTo={},this}},on:{enumerable:!0,value:function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({handler:t,owner:r}),r&&(r._listeningTo[this._id]||(r._listeningTo[this._id]={ref:this,handlers:[]}),r._listeningTo[this._id].handlers.push(t)),this}},off:{enumerable:!0,value:function(i,s,a){function e(e){for(var t=0;t<o._events[e].length;){var r=o._events[e][t],n=r.handler,r=r.owner;if(s&&s!==n||a&&a!==r)t++;else if(r&&r._listeningTo&&r._listeningTo[o._id]&&(-1!==(n=r._listeningTo[o._id].handlers.indexOf(n))&&(r._listeningTo[o._id].handlers.splice(n,1),0===r._listeningTo[o._id].handlers.length&&delete r._listeningTo[o._id])),o._events[e].splice(t,1),i&&s)break}0===o._events[e].length&&delete o._events[e]}var o=this;if(i)this._events[i]&&e(i);else for(var t in this._events)e(t);return this}},trigger:{enumerable:!0,value:function(e){if(this._events[e]){for(var t=_toConsumableArray(this._events[e].map(function(e){return e.handler})),r=arguments.length,n=new Array(1<r?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(var s=0,a=t.length;s<a;s++){var o=t[s],l=o.call.apply(o,[this].concat(n));l&&l.off&&this.off(e,o)}}return this}},listenTo:{enumerable:!0,value:function(e,t,r){return e.on(t,r,this),this}},stopListeningTo:{enumerable:!0,value:function(e,t,r){function n(e){i._listeningTo[e].ref.off(t,r,i)}var i=this;if(e)this._listeningTo[e._id]&&n(e._id);else for(var s in this._listeningTo)n(s);return this}},terminate:{enumerable:!0,value:function(){this.off(),this.stopListeningTo()}}};function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return Object.defineProperties(e,l),e}var r=_createClass(function e(){_classCallCheck(this,e),this.initialize()});t(r.prototype);var n=Object.assign({},l,{_listeners:{writable:!0},initialize:{enumerable:!0,value:function(){l.initialize.value.call(this),this._listeners={}}},on:{value:function(n,e,t){var i=this;return l.on.value.call(this,n,e,t),this._listeners[n]||this.addEventListener(n,this._listeners[n]=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];i.trigger.apply(i,[n].concat(t))}),this}},off:{value:function(e,t,r){var n=[];if(e)this._events[e]&&n.push(e);else for(var i in this._events)n.push(i);l.off.value.call(this,e,t,r);for(var s=0,a=n.length;s<a;s++){var o=n[s];this._listeners[o]&&!this._events[o]&&(this.removeEventListener(o,this._listeners[o]),delete this._listeners[o])}return this}}});return{propertyDescriptors:l,factory:t,Class:r,domPropertyDescriptors:n,domFactory:function(e){return"string"==typeof e&&(e=document.getElementById(e)),Object.defineProperties(e,n),e}}}();
//# sourceMappingURL=eventful.min.js.map
