"use strict";function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Eventful=function(){var e=IdSequence.next,l={_id:{writable:!0},_events:{writable:!0},_listeningTo:{writable:!0},initialize:{enumerable:!0,value:function(){return this._id=e("eventful"),this._events={},this._listeningTo={},this}},on:{enumerable:!0,value:function(e,t,n){this._events[e]||(this._events[e]=[]);var r={handler:t};return n&&((r.owner=n)._listeningTo[this._id]||(n._listeningTo[this._id]={ref:this,handlers:[]}),n._listeningTo[this._id].handlers.push(t)),this._events[e].push(r),this}},off:{enumerable:!0,value:function(i,s,a){function e(e){for(var t=0;t<o._events[e].length;){var n=o._events[e][t],r=n.handler,n=n.owner;if(s&&s!==r||a&&a!==n)t++;else if(n&&n._listeningTo&&n._listeningTo[o._id]&&(-1!==(r=n._listeningTo[o._id].handlers.indexOf(r))&&(n._listeningTo[o._id].handlers.splice(r,1),0===n._listeningTo[o._id].handlers.length&&delete n._listeningTo[o._id])),o._events[e].splice(t,1),i&&s)break}0===o._events[e].length&&delete o._events[e]}var o=this;if(i)this._events[i]&&e(i);else for(var t in this._events)e(t);return this}},trigger:{enumerable:!0,value:function(e){if(this._events[e]){for(var t=_toConsumableArray(this._events[e].map(function(e){return e.handler})),n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var s=0,a=t.length;s<a;s++){var o=t[s],l=o.call.apply(o,[this].concat(r));l&&l.off&&this.off(e,o)}}return this}},listenTo:{enumerable:!0,value:function(e,t,n){return e.on(t,n,this),this}},stopListeningTo:{enumerable:!0,value:function(e,t,n){function r(e){i._listeningTo[e].ref.off(t,n,i)}var i=this;if(e)this._listeningTo[e._id]&&r(e._id);else for(var s in this._listeningTo)r(s);return this}},terminate:{enumerable:!0,value:function(){this.off(),this.stopListeningTo()}}};var t=_createClass(function e(){_classCallCheck(this,e),this.initialize()});Object.defineProperties(t.prototype,l);var n=Object.assign({},l,{_listeners:{writable:!0},initialize:{enumerable:!0,value:function(){l.initialize.value.call(this),this._listeners={}}},on:{value:function(r,e,t){var i=this;return l.on.value.call(this,r,e,t),this._listeners[r]||this.addEventListener(r,this._listeners[r]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.trigger.apply(i,[r].concat(t))}),this}},off:{value:function(e,t,n){var r=[];if(e)this._events[e]&&r.push(e);else for(var i in this._events)r.push(i);l.off.value.call(this,e,t,n);for(var s=0,a=r.length;s<a;s++){var o=r[s];this._listeners[o]&&!this._events[o]&&(this.removeEventListener(o,this._listeners[o]),delete this._listeners[o])}return this}}});return{propertyDescriptors:l,factory:function(){return Object.defineProperties(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},l).initialize()},Eventful:t,domPropertyDescriptors:n,domFactory:function(e){return"string"==typeof e&&(e=document.getElementById(e)),Object.defineProperties(e,n).initialize()}}}();
//# sourceMappingURL=eventful.min.js.map
