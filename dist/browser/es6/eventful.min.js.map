{"version":3,"sources":["eventful.min.js"],"names":["Eventful","next","nextId","IdSequence","methods","initialize","this","_id","_events","_listeningTo","terminate","off","stopListeningTo","on","event","callback","owner","push","other","process","array1","index1","length","item1","splice","array2","index2","item2","key","trigger","args","array","index","call","listenTo","process2","id","process1","listentingTo","propertyDescriptors","writable","enumerable","value","targetMethods","Object","assign","target","_target","_listeners","addEventListener","removeEventListener","targetPropertyDescriptors"],"mappings":"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","file":"eventful.min.js","sourcesContent":["const Eventful=(()=>{const{next:e}=IdSequence,t={initialize(){return this._id=e(\"eventful-\"),this._events={},this._listeningTo={},this},terminate(){this.off(),this.stopListeningTo()},on(e,t,i){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,owner:i}),i&&(i._listeningTo[this._id]||(i._listeningTo[this._id]={}),i._listeningTo[this._id][e]||(i._listeningTo[this._id][e]=[]),i._listeningTo[this._id][e].push({other:this,callback:t})),this},off(e,t,i){const s=e=>{const s=this._events[e];let n=0;for(;n<s.length;){const l=s[n];if(null!=t&&l.callback!==t||null!=i&&l.owner!==i)n++;else{if(s.splice(n,1),i&&i._listeningTo[this._id]&&i._listeningTo[this._id][e]){const s=i._listeningTo[this._id][e];let n=0;for(;n<s.length;){const i=s[n];if(i.other!==this||i.callback!==t)n++;else if(s.splice(n,1),e&&t)break}}if(e&&t)break}}0===this._events[e].length&&delete this._events[e]};if(e)this._events[e]&&s(e);else for(const e in this._events)s(e);return this},trigger(e,...t){if(this._events[e]){const i=[...this._events[e]];for(let e=0,s=i.length;e<s;e++){i[e].callback.call(this,...t)}}return this},listenTo(e,t,i){return e.on(t,i,this),this},stopListeningTo(e,t,i){const s=(e,t)=>{const s=[...this._listeningTo[e][t]];for(let e=0,n=s.length;e<n;e++){s[e].other.off(t,i,this)}},n=e=>{const i=this._listeningTo[e];if(t)i[t]&&s(e,t);else for(const t in i)s(e,t)};if(e)this._listeningTo[e._id]&&n(e._id);else for(const e in this._listeningTo)n(e);return this}},i={_id:{writable:!0},_events:{writable:!0},_listeningTo:{writable:!0},initialize:{enumerable:!0,value:t.initialize},terminate:{enumerable:!0,value:t.terminate},on:{enumerable:!0,value:t.on},off:{enumerable:!0,value:t.off},trigger:{enumerable:!0,value:t.trigger},listenTo:{enumerable:!0,value:t.listenTo},stopListeningTo:{enumerable:!0,value:t.stopListeningTo}},s=Object.assign({},t,{initialize(e=this){return t.initialize.call(this),this._target=e,this._listeners={},this},on(e,i,s){return t.on.call(this,e,i,s),this._listeners[e]||(this._listeners[e]=(...t)=>{this.trigger(e,...t)},this._target.addEventListener(e,this._listeners[e])),this},off(e,i,s){t.off.call(this,e,i,s);const n=e=>{this._target.removeEventListener(e,this._listeners[e]),this._listeners[e]=null};if(e)!this._listeners[e]||this._events[e]&&0!==this._events[e].length||n(e);else for(const t in this._listeners)this._events[e]&&0!==this._events[e].length||n(t);return this}}),n=Object.assign({},i,{_target:{writable:!0},_listeners:{writable:!0},initialize:{enumerable:!0,value:s.initialize},on:{enumerable:!0,value:s.on},off:{enumerable:!0,value:s.off}});return{methods:t,propertyDescriptors:i,targetMethods:s,targetPropertyDescriptors:n}})();\n//# sourceMappingURL=eventful.min.js.map\n"]}