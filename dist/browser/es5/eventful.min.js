"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(i="Object"===i&&e.constructor?e.constructor.name:i)||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Eventful=function(){var e=IdSequence.next,a={initialize:function(){return this._id=e("eventful-"),this._events={},this._listeningTo={},this},terminate:function(){this.off(),this.stopListeningTo()},on:function(e,t,i){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,owner:i}),i&&(i._listeningTo[this._id]||(i._listeningTo[this._id]={}),i._listeningTo[this._id][e]||(i._listeningTo[this._id][e]=[]),i._listeningTo[this._id][e].push({other:this,callback:t})),this},off:function(e,o,l){function t(e){for(var t=u._events[e],i=0;i<t.length;){var n=t[i];if(null!=o&&n.callback!==o||null!=l&&n.owner!==l)i++;else{if(t.splice(i,1),l&&l._listeningTo[u._id]&&l._listeningTo[u._id][e])for(var r=l._listeningTo[u._id][e],s=0;s<r.length;){var a=r[s];if(a.other!==u||a.callback!==o)s++;else if(r.splice(s,1),e&&o)break}if(e&&o)break}}0===u._events[e].length&&delete u._events[e]}var u=this;if(e)this._events[e]&&t(e);else for(var i in this._events)t(i);return this},trigger:function(e){if(this._events[e]){for(var t=_toConsumableArray(this._events[e]),i=arguments.length,n=new Array(1<i?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var s,a=0,o=t.length;a<o;a++)(s=t[a].callback).call.apply(s,[this].concat(n))}return this},listenTo:function(e,t,i){return e.on(t,i,this),this},stopListeningTo:function(e,n,s){function r(e,t){for(var i=_toConsumableArray(a._listeningTo[e][t]),n=0,r=i.length;n<r;n++)i[n].other.off(t,s,a)}function t(e){var t=a._listeningTo[e];if(n)t[n]&&r(e,n);else for(var i in t)r(e,i)}var a=this;if(e)this._listeningTo[e._id]&&t(e._id);else for(var i in this._listeningTo)t(i);return this}},t={_id:{writable:!0},_events:{writable:!0},_listeningTo:{writable:!0},initialize:{enumerable:!0,value:a.initialize},terminate:{enumerable:!0,value:a.terminate},on:{enumerable:!0,value:a.on},off:{enumerable:!0,value:a.off},trigger:{enumerable:!0,value:a.trigger},listenTo:{enumerable:!0,value:a.listenTo},stopListeningTo:{enumerable:!0,value:a.stopListeningTo}},i=Object.assign({},a,{initialize:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this;return a.initialize.call(this),this._target=e,this._listeners={},this},on:function(n,e,t){var r=this;return a.on.call(this,n,e,t),this._listeners[n]||(this._listeners[n]=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r.trigger.apply(r,[n].concat(t))},this._target.addEventListener(n,this._listeners[n])),this},off:function(e,t,i){var n=this;a.off.call(this,e,t,i);function r(e){n._target.removeEventListener(e,n._listeners[e]),n._listeners[e]=null}if(e)!this._listeners[e]||this._events[e]&&0!==this._events[e].length||r(e);else for(var s in this._listeners)this._events[e]&&0!==this._events[e].length||r(s);return this}}),n=Object.assign({},t,{_target:{writable:!0},_listeners:{writable:!0},initialize:{enumerable:!0,value:i.initialize},on:{enumerable:!0,value:i.on},off:{enumerable:!0,value:i.off}});return{methods:a,propertyDescriptors:t,targetMethods:i,targetPropertyDescriptors:n}}();
//# sourceMappingURL=eventful.min.js.map
