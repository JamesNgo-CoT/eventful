"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Eventful=function(){var e=IdSequence.next,a={initialize:function(){return this._id=e("eventful-"),this._events={},this._listeningTo={},this},terminate:function(){this.off(),this.stopListeningTo(),this.trigger("terminate")},on:function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,owner:n}),n&&(n._listeningTo[this._id]||(n._listeningTo[this._id]={}),n._listeningTo[this._id][e]||(n._listeningTo[this._id][e]=[]),n._listeningTo[this._id][e].push({other:this,callback:t})),this},off:function(e,o,l){function t(e){for(var t=u._events[e],n=0;n<t.length;){var i=t[n];if(null!=o&&i.callback!==o||null!=l&&i.owner!==l)n++;else{if(t.splice(n,1),l&&l._listeningTo[u._id]&&l._listeningTo[u._id][e])for(var r=l._listeningTo[u._id][e],s=0;s<r.length;){var a=r[s];if(a.other!==u||a.callback!==o)s++;else if(r.splice(s,1),e&&o)break}if(e&&o)break}}0===u._events[e].length&&delete u._events[e]}var u=this;if(e)this._events[e]&&t(e);else for(var n in this._events)t(n);return this},trigger:function(e){if(this._events[e]){for(var t=_toConsumableArray(this._events[e]),n=arguments.length,i=new Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var s,a=0,o=t.length;a<o;a++)(s=t[a].callback).call.apply(s,[this].concat(i))}return this},listenTo:function(e,t,n){return e.on(t,n,this),this},stopListeningTo:function(e,i,s){function r(e,t){for(var n=_toConsumableArray(a._listeningTo[e][t]),i=0,r=n.length;i<r;i++)n[i].other.off(t,s,a)}function t(e){var t=a._listeningTo[e];if(i)t[i]&&r(e,i);else for(var n in t)r(e,n)}var a=this;if(e)this._listeningTo[e._id]&&t(e._id);else for(var n in this._listeningTo)t(n);return this}},t={_id:{writable:!0},_events:{writable:!0},_listeningTo:{writable:!0},initialize:{enumerable:!0,value:a.initialize},terminate:{enumerable:!0,value:a.terminate},on:{enumerable:!0,value:a.on},off:{enumerable:!0,value:a.off},trigger:{enumerable:!0,value:a.trigger},listenTo:{enumerable:!0,value:a.listenTo},stopListeningTo:{enumerable:!0,value:a.stopListeningTo}},n=Object.assign({},a,{initialize:function(){return this._eventTarget=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this,this._listeners={},a.initialize.call(this)},on:function(i,e,t){var r=this;return a.on.call(this,i,e,t),this._listeners[i]||(this._listeners[i]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.trigger.apply(r,[i].concat(t))},this._eventTarget.addEventListener(i,this._listeners[i])),this},off:function(e,t,n){var i=this;a.off.call(this,e,t,n);function r(e){i._eventTarget.removeEventListener(e,i._listeners[e]),i._listeners[e]=null}if(e)!this._listeners[e]||this._events[e]&&0!==this._events[e].length||r(e);else for(var s in this._listeners)this._events[e]&&0!==this._events[e].length||r(s);return this}}),i=Object.assign({},t,{_listeners:{writable:!0},initialize:{enumerable:!0,value:n.initialize},on:{enumerable:!0,value:n.on},off:{enumerable:!0,value:n.off}});return{methods:a,propertyDescriptors:t,eventTargetMethods:n,eventTargetPropertyDescriptors:i,factory:function(e){return e instanceof EventTarget?Object.defineProperties(e,i):Object.defineProperties(e,t)}}}();
//# sourceMappingURL=eventful.min.js.map
